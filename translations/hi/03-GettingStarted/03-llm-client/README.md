<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "4d846ebb88fbb0f00549e2ff8cc3f746",
  "translation_date": "2025-10-06T13:51:38+00:00",
  "source_file": "03-GettingStarted/03-llm-client/README.md",
  "language_code": "hi"
}
-->
# LLM рдХреЗ рд╕рд╛рде рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдирд╛

рдЕрдм рддрдХ, рдЖрдкрдиреЗ рджреЗрдЦрд╛ рдХрд┐ рд╕рд░реНрд╡рд░ рдФрд░ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреИрд╕реЗ рдмрдирд╛рддреЗ рд╣реИрдВред рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд░реНрд╡рд░ рдХреЛ рд╕реНрдкрд╖реНрдЯ рд░реВрдк рд╕реЗ рдХреЙрд▓ рдХрд░рдХреЗ рдЙрд╕рдХреЗ рдЯреВрд▓реНрд╕, рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдФрд░ рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕ рдХреА рд╕реВрдЪреА рдкреНрд░рд╛рдкреНрдд рдХрд░ рд╕рдХрддрд╛ рд╣реИред рд╣рд╛рд▓рд╛рдВрдХрд┐, рдпрд╣ рддрд░реАрдХрд╛ рдмрд╣реБрдд рд╡реНрдпрд╛рд╡рд╣рд╛рд░рд┐рдХ рдирд╣реАрдВ рд╣реИред рдЖрдкрдХрд╛ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдПрдЬреЗрдВрдЯрд┐рдХ рдпреБрдЧ рдореЗрдВ рд░рд╣рддрд╛ рд╣реИ рдФрд░ рд╡рд╣ рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдФрд░ LLM рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдХреЗ рдХрд╛рдо рдХрд░рдирд╛ рдЪрд╛рд╣рддрд╛ рд╣реИред рдЖрдкрдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдЗрд╕ рдмрд╛рдд рд╕реЗ рдлрд░реНрдХ рдирд╣реАрдВ рдкрдбрд╝рддрд╛ рдХрд┐ рдЖрдк рдЕрдкрдиреА рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ MCP рдореЗрдВ рд╕рдВрдЧреНрд░рд╣реАрдд рдХрд░рддреЗ рд╣реИрдВ рдпрд╛ рдирд╣реАрдВ, рд▓реЗрдХрд┐рди рд╡реЗ рдкреНрд░рд╛рдХреГрддрд┐рдХ рднрд╛рд╖рд╛ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдХреА рдЙрдореНрдореАрдж рдХрд░рддреЗ рд╣реИрдВред рддреЛ рд╣рдо рдЗрд╕реЗ рдХреИрд╕реЗ рд╣рд▓ рдХрд░реЗрдВ? рд╕рдорд╛рдзрд╛рди рдХреНрд▓рд╛рдЗрдВрдЯ рдореЗрдВ LLM рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рд╣реИред

## рдЕрд╡рд▓реЛрдХрди

рдЗрд╕ рдкрд╛рда рдореЗрдВ рд╣рдо рдЖрдкрдХреЗ рдХреНрд▓рд╛рдЗрдВрдЯ рдореЗрдВ LLM рдЬреЛрдбрд╝рдиреЗ рдкрд░ рдзреНрдпрд╛рди рдХреЗрдВрджреНрд░рд┐рдд рдХрд░реЗрдВрдЧреЗ рдФрд░ рджрд┐рдЦрд╛рдПрдВрдЧреЗ рдХрд┐ рдпрд╣ рдЖрдкрдХреЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЗ рд▓рд┐рдП рдмреЗрд╣рддрд░ рдЕрдиреБрднрд╡ рдХреИрд╕реЗ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИред

## рд╕реАрдЦрдиреЗ рдХреЗ рдЙрджреНрджреЗрд╢реНрдп

рдЗрд╕ рдкрд╛рда рдХреЗ рдЕрдВрдд рддрдХ, рдЖрдк рд╕рдХреНрд╖рдо рд╣реЛрдВрдЧреЗ:

- LLM рдХреЗ рд╕рд╛рде рдПрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдирд╛ред
- MCP рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде LLM рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд╣рдЬрддрд╛ рд╕реЗ рд╕рдВрд╡рд╛рдж рдХрд░рдирд╛ред
- рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд╛рдЗрдб рдкрд░ рдмреЗрд╣рддрд░ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдЕрдиреБрднрд╡ рдкреНрд░рджрд╛рди рдХрд░рдирд╛ред

## рджреГрд╖реНрдЯрд┐рдХреЛрдг

рдЖрдЗрдП рд╕рдордЭрддреЗ рд╣реИрдВ рдХрд┐ рд╣рдореЗрдВ рдХреМрди рд╕рд╛ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдЕрдкрдирд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред LLM рдЬреЛрдбрд╝рдирд╛ рд╕рд░рд▓ рд▓рдЧрддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рдХреНрдпрд╛ рд╣рдо рд╡рд╛рд╕реНрддрд╡ рдореЗрдВ рдРрд╕рд╛ рдХрд░реЗрдВрдЧреЗ?

рдпрд╣рд╛рдВ рдмрддрд╛рдпрд╛ рдЧрдпрд╛ рд╣реИ рдХрд┐ рдХреНрд▓рд╛рдЗрдВрдЯ рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдХреИрд╕реЗ рд╕рдВрд╡рд╛рдж рдХрд░реЗрдЧрд╛:

1. рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рдХрдиреЗрдХреНрд╢рди рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред

1. рдХреНрд╖рдорддрд╛рдУрдВ, рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕, рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдФрд░ рдЯреВрд▓реНрд╕ рдХреА рд╕реВрдЪреА рдмрдирд╛рдПрдВ рдФрд░ рдЙрдирдХреА рд╕реНрдХреАрдорд╛ рдХреЛ рд╕рд╣реЗрдЬреЗрдВред

1. рдПрдХ LLM рдЬреЛрдбрд╝реЗрдВ рдФрд░ рд╕рд╣реЗрдЬреА рдЧрдИ рдХреНрд╖рдорддрд╛рдУрдВ рдФрд░ рдЙрдирдХреА рд╕реНрдХреАрдорд╛ рдХреЛ рдЙрд╕ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдкрд╛рд╕ рдХрд░реЗрдВ рдЬрд┐рд╕реЗ LLM рд╕рдордЭрддрд╛ рд╣реИред

1. рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░реЙрдореНрдкреНрдЯ рдХреЛ рд╕рдВрднрд╛рд▓реЗрдВ рдФрд░ рдЗрд╕реЗ LLM рдХреЛ рдкрд╛рд╕ рдХрд░реЗрдВ, рд╕рд╛рде рд╣реА рдХреНрд▓рд╛рдЗрдВрдЯ рджреНрд╡рд╛рд░рд╛ рд╕реВрдЪреАрдмрджреНрдз рдЯреВрд▓реНрд╕ рдХреЛ рднреАред

рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛, рдЕрдм рд╣рдо рд╕рдордЭ рдЧрдП рд╣реИрдВ рдХрд┐ рдЗрд╕реЗ рдЙрдЪреНрдЪ рд╕реНрддрд░ рдкрд░ рдХреИрд╕реЗ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИред рдЖрдЗрдП рдЗрд╕реЗ рдиреАрдЪреЗ рджрд┐рдП рдЧрдП рдЕрднреНрдпрд╛рд╕ рдореЗрдВ рдЖрдЬрдорд╛рдПрдВред

## рдЕрднреНрдпрд╛рд╕: LLM рдХреЗ рд╕рд╛рде рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдирд╛

рдЗрд╕ рдЕрднреНрдпрд╛рд╕ рдореЗрдВ, рд╣рдо рдЕрдкрдиреЗ рдХреНрд▓рд╛рдЗрдВрдЯ рдореЗрдВ LLM рдЬреЛрдбрд╝рдирд╛ рд╕реАрдЦреЗрдВрдЧреЗред

### GitHub рд╡реНрдпрдХреНрддрд┐рдЧрдд рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдкреНрд░рдорд╛рдгреАрдХрд░рдг

GitHub рдЯреЛрдХрди рдмрдирд╛рдирд╛ рдПрдХ рд╕рд░рд▓ рдкреНрд░рдХреНрд░рд┐рдпрд╛ рд╣реИред рдЗрд╕реЗ рдХреИрд╕реЗ рдХрд░реЗрдВ:

- GitHub рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкрд░ рдЬрд╛рдПрдВ тАУ рдКрдкрд░ рджрд╛рдИрдВ рдУрд░ рдЕрдкрдиреЗ рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓ рдЪрд┐рддреНрд░ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдЪреБрдиреЗрдВред
- рдбреЗрд╡рд▓рдкрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкрд░ рдЬрд╛рдПрдВ тАУ рдиреАрдЪреЗ рд╕реНрдХреНрд░реЙрд▓ рдХрд░реЗрдВ рдФрд░ рдбреЗрд╡рд▓рдкрд░ рд╕реЗрдЯрд┐рдВрдЧреНрд╕ рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВред
- рд╡реНрдпрдХреНрддрд┐рдЧрдд рдПрдХреНрд╕реЗрд╕ рдЯреЛрдХрди рдЪреБрдиреЗрдВ тАУ Fine-grained tokens рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рдирдпрд╛ рдЯреЛрдХрди рдЬрдирд░реЗрдЯ рдХрд░реЗрдВред
- рдЕрдкрдиреЗ рдЯреЛрдХрди рдХреЛ рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд░реЗрдВ тАУ рд╕рдВрджрд░реНрдн рдХреЗ рд▓рд┐рдП рдПрдХ рдиреЛрдЯ рдЬреЛрдбрд╝реЗрдВ, рд╕рдорд╛рдкреНрддрд┐ рддрд┐рдерд┐ рд╕реЗрдЯ рдХрд░реЗрдВ, рдФрд░ рдЖрд╡рд╢реНрдпрдХ рд╕реНрдХреЛрдк (рдЕрдиреБрдорддрд┐рдпрд╛рдВ) рдЪреБрдиреЗрдВред рдЗрд╕ рдорд╛рдорд▓реЗ рдореЗрдВ, рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ рдХрд┐ Models рдЕрдиреБрдорддрд┐ рдЬреЛрдбрд╝реЗрдВред
- рдЯреЛрдХрди рдЬрдирд░реЗрдЯ рдХрд░реЗрдВ рдФрд░ рдХреЙрдкреА рдХрд░реЗрдВ тАУ Generate token рдкрд░ рдХреНрд▓рд┐рдХ рдХрд░реЗрдВ рдФрд░ рдЗрд╕реЗ рддреБрд░рдВрдд рдХреЙрдкреА рдХрд░рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВ, рдХреНрдпреЛрдВрдХрд┐ рдЖрдк рдЗрд╕реЗ рдлрд┐рд░ рд╕реЗ рдирд╣реАрдВ рджреЗрдЦ рдкрд╛рдПрдВрдЧреЗред

### -1- рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВ

рдЖрдЗрдП рдкрд╣рд▓реЗ рдЕрдкрдирд╛ рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдПрдВ:

#### TypeScript

```typescript
import { Client } from "@modelcontextprotocol/sdk/client/index.js";
import { StdioClientTransport } from "@modelcontextprotocol/sdk/client/stdio.js";
import { Transport } from "@modelcontextprotocol/sdk/shared/transport.js";
import OpenAI from "openai";
import { z } from "zod"; // Import zod for schema validation

class MCPClient {
    private openai: OpenAI;
    private client: Client;
    constructor(){
        this.openai = new OpenAI({
            baseURL: "https://models.inference.ai.azure.com", 
            apiKey: process.env.GITHUB_TOKEN,
        });

        this.client = new Client(
            {
                name: "example-client",
                version: "1.0.0"
            },
            {
                capabilities: {
                prompts: {},
                resources: {},
                tools: {}
                }
            }
            );    
    }
}
```

рдКрдкрд░ рджрд┐рдП рдЧрдП рдХреЛрдб рдореЗрдВ рд╣рдордиреЗ:

- рдЖрд╡рд╢реНрдпрдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЖрдпрд╛рдд рдХреА рд╣реИрдВред
- рдПрдХ рдХреНрд▓рд╛рд╕ рдмрдирд╛рдИ рд╣реИ рдЬрд┐рд╕рдореЗрдВ рджреЛ рд╕рджрд╕реНрдп рд╣реИрдВ, `client` рдФрд░ `openai`, рдЬреЛ рд╣рдореЗрдВ рдХреНрд▓рд╛рдЗрдВрдЯ рдкреНрд░рдмрдВрдзрди рдФрд░ LLM рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХрд░рдиреЗ рдореЗрдВ рдорджрдж рдХрд░реЗрдВрдЧреЗред
- рд╣рдорд╛рд░реЗ LLM рдЗрдВрд╕реНрдЯреЗрдВрд╕ рдХреЛ GitHub Models рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рд╣реИ, `baseUrl` рдХреЛ рдЗрдиреНрдлрд░реЗрдВрд╕ API рдХреА рдУрд░ рдЗрдВрдЧрд┐рдд рдХрд░рдХреЗред

#### Python

```python
from mcp import ClientSession, StdioServerParameters, types
from mcp.client.stdio import stdio_client

# Create server parameters for stdio connection
server_params = StdioServerParameters(
    command="mcp",  # Executable
    args=["run", "server.py"],  # Optional command line arguments
    env=None,  # Optional environment variables
)


async def run():
    async with stdio_client(server_params) as (read, write):
        async with ClientSession(
            read, write
        ) as session:
            # Initialize the connection
            await session.initialize()


if __name__ == "__main__":
    import asyncio

    asyncio.run(run())

```

рдКрдкрд░ рджрд┐рдП рдЧрдП рдХреЛрдб рдореЗрдВ рд╣рдордиреЗ:

- MCP рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЖрдпрд╛рдд рдХреА рд╣реИрдВред
- рдПрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдпрд╛ рд╣реИред

#### .NET

```csharp
using Azure;
using Azure.AI.Inference;
using Azure.Identity;
using System.Text.Json;
using ModelContextProtocol.Client;
using ModelContextProtocol.Protocol.Transport;
using System.Text.Json;

var clientTransport = new StdioClientTransport(new()
{
    Name = "Demo Server",
    Command = "/workspaces/mcp-for-beginners/03-GettingStarted/02-client/solution/server/bin/Debug/net8.0/server",
    Arguments = [],
});

await using var mcpClient = await McpClientFactory.CreateAsync(clientTransport);
```

#### Java

рд╕рдмрд╕реЗ рдкрд╣рд▓реЗ, рдЖрдкрдХреЛ рдЕрдкрдиреЗ `pom.xml` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ LangChain4j рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдЬреЛрдбрд╝рдиреА рд╣реЛрдЧреАред MCP рдЗрдВрдЯреАрдЧреНрд░реЗрд╢рди рдФрд░ GitHub Models рд╕рдорд░реНрдерди рд╕рдХреНрд╖рдо рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЗрди рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдХреЛ рдЬреЛрдбрд╝реЗрдВ:

```xml
<properties>
    <langchain4j.version>1.0.0-beta3</langchain4j.version>
</properties>

<dependencies>
    <!-- LangChain4j MCP Integration -->
    <dependency>
        <groupId>dev.langchain4j</groupId>
        <artifactId>langchain4j-mcp</artifactId>
        <version>${langchain4j.version}</version>
    </dependency>
    
    <!-- OpenAI Official API Client -->
    <dependency>
        <groupId>dev.langchain4j</groupId>
        <artifactId>langchain4j-open-ai-official</artifactId>
        <version>${langchain4j.version}</version>
    </dependency>
    
    <!-- GitHub Models Support -->
    <dependency>
        <groupId>dev.langchain4j</groupId>
        <artifactId>langchain4j-github-models</artifactId>
        <version>${langchain4j.version}</version>
    </dependency>
    
    <!-- Spring Boot Starter (optional, for production apps) -->
    <dependency>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-actuator</artifactId>
    </dependency>
</dependencies>
```

рдлрд┐рд░ рдЕрдкрдиреА Java рдХреНрд▓рд╛рдЗрдВрдЯ рдХреНрд▓рд╛рд╕ рдмрдирд╛рдПрдВ:

```java
import dev.langchain4j.mcp.McpToolProvider;
import dev.langchain4j.mcp.client.DefaultMcpClient;
import dev.langchain4j.mcp.client.McpClient;
import dev.langchain4j.mcp.client.transport.McpTransport;
import dev.langchain4j.mcp.client.transport.http.HttpMcpTransport;
import dev.langchain4j.model.chat.ChatLanguageModel;
import dev.langchain4j.model.openaiofficial.OpenAiOfficialChatModel;
import dev.langchain4j.service.AiServices;
import dev.langchain4j.service.tool.ToolProvider;

import java.time.Duration;
import java.util.List;

public class LangChain4jClient {
    
    public static void main(String[] args) throws Exception {        // Configure the LLM to use GitHub Models
        ChatLanguageModel model = OpenAiOfficialChatModel.builder()
                .isGitHubModels(true)
                .apiKey(System.getenv("GITHUB_TOKEN"))
                .timeout(Duration.ofSeconds(60))
                .modelName("gpt-4.1-nano")
                .build();

        // Create MCP transport for connecting to server
        McpTransport transport = new HttpMcpTransport.Builder()
                .sseUrl("http://localhost:8080/sse")
                .timeout(Duration.ofSeconds(60))
                .logRequests(true)
                .logResponses(true)
                .build();

        // Create MCP client
        McpClient mcpClient = new DefaultMcpClient.Builder()
                .transport(transport)
                .build();
    }
}
```

рдКрдкрд░ рджрд┐рдП рдЧрдП рдХреЛрдб рдореЗрдВ рд╣рдордиреЗ:

- **LangChain4j рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдЬреЛрдбрд╝реАрдВ**: MCP рдЗрдВрдЯреАрдЧреНрд░реЗрд╢рди, OpenAI рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рдХреНрд▓рд╛рдЗрдВрдЯ, рдФрд░ GitHub Models рд╕рдорд░реНрдерди рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХред
- **LangChain4j рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдЖрдпрд╛рдд рдХреАрдВ**: MCP рдЗрдВрдЯреАрдЧреНрд░реЗрд╢рди рдФрд░ OpenAI рдЪреИрдЯ рдореЙрдбрд▓ рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдХреЗ рд▓рд┐рдПред
- **`ChatLanguageModel` рдмрдирд╛рдпрд╛**: GitHub Models рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрдкрдХреЗ GitHub рдЯреЛрдХрди рдХреЗ рд╕рд╛рде рдХреЙрдиреНрдлрд╝рд┐рдЧрд░ рдХрд┐рдпрд╛ рдЧрдпрд╛ред
- **HTTP рдЯреНрд░рд╛рдВрд╕рдкреЛрд░реНрдЯ рд╕реЗрдЯ рдХрд┐рдпрд╛**: MCP рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП Server-Sent Events (SSE) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛ред
- **MCP рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдпрд╛**: рдЬреЛ рд╕рд░реНрд╡рд░ рдХреЗ рд╕рд╛рде рд╕рдВрд╡рд╛рдж рдХреЛ рд╕рдВрднрд╛рд▓реЗрдЧрд╛ред
- **LangChain4j рдХрд╛ рдмрд┐рд▓реНрдЯ-рдЗрди MCP рд╕рдорд░реНрдерди рдЙрдкрдпреЛрдЧ рдХрд┐рдпрд╛**: рдЬреЛ LLMs рдФрд░ MCP рд╕рд░реНрд╡рд░ рдХреЗ рдмреАрдЪ рдЗрдВрдЯреАрдЧреНрд░реЗрд╢рди рдХреЛ рд╕рд░рд▓ рдмрдирд╛рддрд╛ рд╣реИред

#### Rust

рдпрд╣ рдЙрджрд╛рд╣рд░рдг рдорд╛рдирддрд╛ рд╣реИ рдХрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдПрдХ Rust рдЖрдзрд╛рд░рд┐рдд MCP рд╕рд░реНрд╡рд░ рдЪрд▓ рд░рд╣рд╛ рд╣реИред рдпрджрд┐ рдЖрдкрдХреЗ рдкрд╛рд╕ рдРрд╕рд╛ рдирд╣реАрдВ рд╣реИ, рддреЛ [01-first-server](../01-first-server/README.md) рдкрд╛рда рдореЗрдВ рд╡рд╛рдкрд╕ рдЬрд╛рдПрдВ рдФрд░ рд╕рд░реНрд╡рд░ рдмрдирд╛рдПрдВред

рдПрдХ рдмрд╛рд░ рдЬрдм рдЖрдкрдХреЗ рдкрд╛рд╕ Rust MCP рд╕рд░реНрд╡рд░ рд╣реЛ, рддреЛ рдПрдХ рдЯрд░реНрдорд┐рдирд▓ рдЦреЛрд▓реЗрдВ рдФрд░ рд╕рд░реНрд╡рд░ рдХреЗ рд╕рдорд╛рди рдбрд╛рдпрд░реЗрдХреНрдЯрд░реА рдореЗрдВ рдЬрд╛рдПрдВред рдлрд┐рд░ рдПрдХ рдирдпрд╛ LLM рдХреНрд▓рд╛рдЗрдВрдЯ рдкреНрд░реЛрдЬреЗрдХреНрдЯ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдорд╛рдВрдб рдЪрд▓рд╛рдПрдВ:

```bash
mkdir calculator-llmclient
cd calculator-llmclient
cargo init
```

рдЕрдкрдиреЗ `Cargo.toml` рдлрд╝рд╛рдЗрд▓ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдбрд┐рдкреЗрдВрдбреЗрдВрд╕реА рдЬреЛрдбрд╝реЗрдВ:

```toml
[dependencies]
async-openai = { version = "0.29.0", features = ["byot"] }
rmcp = { version = "0.5.0", features = ["client", "transport-child-process"] }
serde_json = "1.0.141"
tokio = { version = "1.46.1", features = ["rt-multi-thread"] }
```

> [!NOTE]
> OpenAI рдХреЗ рд▓рд┐рдП рдХреЛрдИ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ Rust рд▓рд╛рдЗрдмреНрд░реЗрд░реА рдирд╣реАрдВ рд╣реИ, рд╣рд╛рд▓рд╛рдВрдХрд┐, `async-openai` рдХреНрд░реЗрдЯ рдПрдХ [рд╕рдореБрджрд╛рдп рджреНрд╡рд╛рд░рд╛ рдмрдирд╛рдП рд░рдЦрд╛ рд▓рд╛рдЗрдмреНрд░реЗрд░реА](https://platform.openai.com/docs/libraries/rust#rust) рд╣реИ рдЬреЛ рдЖрдорддреМрд░ рдкрд░ рдЙрдкрдпреЛрдЧ рдХреА рдЬрд╛рддреА рд╣реИред

`src/main.rs` рдлрд╝рд╛рдЗрд▓ рдЦреЛрд▓реЗрдВ рдФрд░ рдЗрд╕рдХреА рд╕рд╛рдордЧреНрд░реА рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рд╕реЗ рдмрджрд▓реЗрдВ:

```rust
use async_openai::{Client, config::OpenAIConfig};
use rmcp::{
    RmcpError,
    model::{CallToolRequestParam, ListToolsResult},
    service::{RoleClient, RunningService, ServiceExt},
    transport::{ConfigureCommandExt, TokioChildProcess},
};
use serde_json::{Value, json};
use std::error::Error;
use tokio::process::Command;

#[tokio::main]
async fn main() -> Result<(), Box<dyn Error>> {
    // Initial message
    let mut messages = vec![json!({"role": "user", "content": "What is the sum of 3 and 2?"})];

    // Setup OpenAI client
    let api_key = std::env::var("OPENAI_API_KEY")?;
    let openai_client = Client::with_config(
        OpenAIConfig::new()
            .with_api_base("https://models.github.ai/inference/chat")
            .with_api_key(api_key),
    );

    // Setup MCP client
    let server_dir = std::path::Path::new(env!("CARGO_MANIFEST_DIR"))
        .parent()
        .unwrap()
        .join("calculator-server");

    let mcp_client = ()
        .serve(
            TokioChildProcess::new(Command::new("cargo").configure(|cmd| {
                cmd.arg("run").current_dir(server_dir);
            }))
            .map_err(RmcpError::transport_creation::<TokioChildProcess>)?,
        )
        .await?;

    // TODO: Get MCP tool listing 

    // TODO: LLM conversation with tool calls

    Ok(())
}
```

рдпрд╣ рдХреЛрдб рдПрдХ рдмреЗрд╕рд┐рдХ Rust рдПрдкреНрд▓рд┐рдХреЗрд╢рди рд╕реЗрдЯ рдХрд░рддрд╛ рд╣реИ рдЬреЛ MCP рд╕рд░реНрд╡рд░ рдФрд░ GitHub Models рдХреЗ рд╕рд╛рде LLM рдЗрдВрдЯрд░реИрдХреНрд╢рди рдХреЗ рд▓рд┐рдП рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдЧрд╛ред

> [!IMPORTANT]
> рдПрдкреНрд▓рд┐рдХреЗрд╢рди рдЪрд▓рд╛рдиреЗ рд╕реЗ рдкрд╣рд▓реЗ `OPENAI_API_KEY` рдкрд░реНрдпрд╛рд╡рд░рдг рдЪрд░ рдХреЛ рдЕрдкрдиреЗ GitHub рдЯреЛрдХрди рдХреЗ рд╕рд╛рде рд╕реЗрдЯ рдХрд░рдирд╛ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рдХрд░реЗрдВред

рдмрд╣реБрдд рдЕрдЪреНрдЫрд╛, рдЕрдЧрд▓реЗ рдЪрд░рдг рдореЗрдВ, рдЖрдЗрдП рд╕рд░реНрд╡рд░ рдкрд░ рдХреНрд╖рдорддрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдПрдВред

### -2- рд╕рд░реНрд╡рд░ рдХреНрд╖рдорддрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдПрдВ

рдЕрдм рд╣рдо рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░реЗрдВрдЧреЗ рдФрд░ рдЙрд╕рдХреА рдХреНрд╖рдорддрд╛рдУрдВ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдкреВрдЫреЗрдВрдЧреЗ:

#### TypeScript

рдЙрд╕реА рдХреНрд▓рд╛рд╕ рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рд╡рд┐рдзрд┐рдпрд╛рдВ рдЬреЛрдбрд╝реЗрдВ:

```typescript
async connectToServer(transport: Transport) {
     await this.client.connect(transport);
     this.run();
     console.error("MCPClient started on stdin/stdout");
}

async run() {
    console.log("Asking server for available tools");

    // listing tools
    const toolsResult = await this.client.listTools();
}
```

рдКрдкрд░ рджрд┐рдП рдЧрдП рдХреЛрдб рдореЗрдВ рд╣рдордиреЗ:

- рд╕рд░реНрд╡рд░ рд╕реЗ рдХрдиреЗрдХреНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдЬреЛрдбрд╝рд╛, `connectToServer`ред
- рдПрдХ `run` рд╡рд┐рдзрд┐ рдмрдирд╛рдИ рдЬреЛ рд╣рдорд╛рд░реЗ рдРрдк рдлреНрд▓реЛ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдЬрд┐рдореНрдореЗрджрд╛рд░ рд╣реИред рдЕрднреА рддрдХ рдпрд╣ рдХреЗрд╡рд▓ рдЯреВрд▓реНрд╕ рдХреА рд╕реВрдЪреА рдмрдирд╛рддрд╛ рд╣реИ, рд▓реЗрдХрд┐рди рд╣рдо рдЗрд╕рдореЗрдВ рдЬрд▓реНрдж рд╣реА рдФрд░ рдЬреЛрдбрд╝реЗрдВрдЧреЗред

#### Python

```python
# List available resources
resources = await session.list_resources()
print("LISTING RESOURCES")
for resource in resources:
    print("Resource: ", resource)

# List available tools
tools = await session.list_tools()
print("LISTING TOOLS")
for tool in tools.tools:
    print("Tool: ", tool.name)
    print("Tool", tool.inputSchema["properties"])
```

рдпрд╣рд╛рдВ рд╣рдордиреЗ рдЬреЛрдбрд╝рд╛ рд╣реИ:

- рд╕рдВрд╕рд╛рдзрдиреЛрдВ рдФрд░ рдЯреВрд▓реНрд╕ рдХреА рд╕реВрдЪреА рдмрдирд╛рдИ рдФрд░ рдЙрдиреНрд╣реЗрдВ рдкреНрд░рд┐рдВрдЯ рдХрд┐рдпрд╛ред рдЯреВрд▓реНрд╕ рдХреЗ рд▓рд┐рдП рд╣рдордиреЗ `inputSchema` рднреА рд╕реВрдЪреАрдмрджреНрдз рдХрд┐рдпрд╛ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдо рдмрд╛рдж рдореЗрдВ рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред

#### .NET

```csharp
async Task<List<ChatCompletionsToolDefinition>> GetMcpTools()
{
    Console.WriteLine("Listing tools");
    var tools = await mcpClient.ListToolsAsync();

    List<ChatCompletionsToolDefinition> toolDefinitions = new List<ChatCompletionsToolDefinition>();

    foreach (var tool in tools)
    {
        Console.WriteLine($"Connected to server with tools: {tool.Name}");
        Console.WriteLine($"Tool description: {tool.Description}");
        Console.WriteLine($"Tool parameters: {tool.JsonSchema}");

        // TODO: convert tool definition from MCP tool to LLm tool     
    }

    return toolDefinitions;
}
```

рдКрдкрд░ рджрд┐рдП рдЧрдП рдХреЛрдб рдореЗрдВ рд╣рдордиреЗ:

- MCP рд╕рд░реНрд╡рд░ рдкрд░ рдЙрдкрд▓рдмреНрдз рдЯреВрд▓реНрд╕ рдХреА рд╕реВрдЪреА рдмрдирд╛рдИред
- рдкреНрд░рддреНрдпреЗрдХ рдЯреВрд▓ рдХреЗ рд▓рд┐рдП рдирд╛рдо, рд╡рд┐рд╡рд░рдг рдФрд░ рдЙрд╕рдХреА рд╕реНрдХреАрдорд╛ рд╕реВрдЪреАрдмрджреНрдз рдХреАред рдмрд╛рдж рд╡рд╛рд▓рд╛ рд╡рд╣ рд╣реИ рдЬрд┐рд╕реЗ рд╣рдо рдЬрд▓реНрдж рд╣реА рдЯреВрд▓реНрд╕ рдХреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЙрдкрдпреЛрдЧ рдХрд░реЗрдВрдЧреЗред

#### Java

```java
// Create a tool provider that automatically discovers MCP tools
ToolProvider toolProvider = McpToolProvider.builder()
        .mcpClients(List.of(mcpClient))
        .build();

// The MCP tool provider automatically handles:
// - Listing available tools from the MCP server
// - Converting MCP tool schemas to LangChain4j format
// - Managing tool execution and responses
```

рдКрдкрд░ рджрд┐рдП рдЧрдП рдХреЛрдб рдореЗрдВ рд╣рдордиреЗ:

- рдПрдХ `McpToolProvider` рдмрдирд╛рдпрд╛ рдЬреЛ MCP рд╕рд░реНрд╡рд░ рд╕реЗ рд╕рднреА рдЯреВрд▓реНрд╕ рдХреЛ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рд░реВрдк рд╕реЗ рдЦреЛрдЬрддрд╛ рдФрд░ рдкрдВрдЬреАрдХреГрдд рдХрд░рддрд╛ рд╣реИред
- рдЯреВрд▓ рдкреНрд░реЛрд╡рд╛рдЗрдбрд░ рдЖрдВрддрд░рд┐рдХ рд░реВрдк рд╕реЗ MCP рдЯреВрд▓ рд╕реНрдХреАрдорд╛ рдФрд░ LangChain4j рдХреЗ рдЯреВрд▓ рдкреНрд░рд╛рд░реВрдк рдХреЗ рдмреАрдЪ рд░реВрдкрд╛рдВрддрд░рдг рдХреЛ рд╕рдВрднрд╛рд▓рддрд╛ рд╣реИред
- рдпрд╣ рджреГрд╖реНрдЯрд┐рдХреЛрдг рдореИрдиреБрдЕрд▓ рдЯреВрд▓ рд╕реВрдЪреАрдХрд░рдг рдФрд░ рд░реВрдкрд╛рдВрддрд░рдг рдкреНрд░рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЕрдореВрд░реНрдд рдХрд░рддрд╛ рд╣реИред

#### Rust

MCP рд╕рд░реНрд╡рд░ рд╕реЗ рдЯреВрд▓реНрд╕ рдкреНрд░рд╛рдкреНрдд рдХрд░рдирд╛ `list_tools` рд╡рд┐рдзрд┐ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдХрд┐рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред рдЕрдкрдиреЗ `main` рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ, MCP рдХреНрд▓рд╛рдЗрдВрдЯ рд╕реЗрдЯ рдХрд░рдиреЗ рдХреЗ рдмрд╛рдж рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

```rust
// Get MCP tool listing 
let tools = mcp_client.list_tools(Default::default()).await?;
```

### -3- рд╕рд░реНрд╡рд░ рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ LLM рдЯреВрд▓реНрд╕ рдореЗрдВ рдмрджрд▓реЗрдВ

рд╕рд░реНрд╡рд░ рдХреНрд╖рдорддрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдиреЗ рдХреЗ рдмрд╛рдж рдЕрдЧрд▓рд╛ рдХрджрдо рдЙрдиреНрд╣реЗрдВ рдЙрд╕ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдмрджрд▓рдирд╛ рд╣реИ рдЬрд┐рд╕реЗ LLM рд╕рдордЭрддрд╛ рд╣реИред рдПрдХ рдмрд╛рд░ рдЬрдм рд╣рдо рдРрд╕рд╛ рдХрд░ рд▓реЗрддреЗ рд╣реИрдВ, рддреЛ рд╣рдо рдЗрди рдХреНрд╖рдорддрд╛рдУрдВ рдХреЛ LLM рдХреЛ рдЯреВрд▓реНрд╕ рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рджрд╛рди рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред

#### TypeScript

1. MCP рд╕рд░реНрд╡рд░ рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ LLM рдХреЗ рдЙрдкрдпреЛрдЧ рдХреЗ рд▓рд┐рдП рдЯреВрд▓ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

    ```typescript
    openAiToolAdapter(tool: {
        name: string;
        description?: string;
        input_schema: any;
        }) {
        // Create a zod schema based on the input_schema
        const schema = z.object(tool.input_schema);
    
        return {
            type: "function" as const, // Explicitly set type to "function"
            function: {
            name: tool.name,
            description: tool.description,
            parameters: {
            type: "object",
            properties: tool.input_schema.properties,
            required: tool.input_schema.required,
            },
            },
        };
    }

    ```

    рдКрдкрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рдХреЛрдб MCP рд╕рд░реНрд╡рд░ рд╕реЗ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд▓реЗрддрд╛ рд╣реИ рдФрд░ рдЙрд╕реЗ рдЯреВрд▓ рдкрд░рд┐рднрд╛рд╖рд╛ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдмрджрд▓рддрд╛ рд╣реИ рдЬрд┐рд╕реЗ LLM рд╕рдордЭ рд╕рдХрддрд╛ рд╣реИред

1. рдЕрдЧрд▓рд╛, `run` рд╡рд┐рдзрд┐ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ рддрд╛рдХрд┐ рд╕рд░реНрд╡рд░ рдХреНрд╖рдорддрд╛рдУрдВ рдХреА рд╕реВрдЪреА рдмрдирд╛рдИ рдЬрд╛ рд╕рдХреЗ:

    ```typescript
    async run() {
        console.log("Asking server for available tools");
        const toolsResult = await this.client.listTools();
        const tools = toolsResult.tools.map((tool) => {
            return this.openAiToolAdapter({
            name: tool.name,
            description: tool.description,
            input_schema: tool.inputSchema,
            });
        });
    }
    ```

    рдКрдкрд░ рджрд┐рдП рдЧрдП рдХреЛрдб рдореЗрдВ, рд╣рдордиреЗ `run` рд╡рд┐рдзрд┐ рдХреЛ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рд╣реИ рддрд╛рдХрд┐ рдкрд░рд┐рдгрд╛рдо рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдореИрдк рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ рдФрд░ рдкреНрд░рддреНрдпреЗрдХ рдкреНрд░рд╡рд┐рд╖реНрдЯрд┐ рдХреЗ рд▓рд┐рдП `openAiToolAdapter` рдХреЛ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред

#### Python

1. рдкрд╣рд▓реЗ, рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХрдиреНрд╡рд░реНрдЯрд░ рдлрд╝рдВрдХреНрд╢рди рдмрдирд╛рдПрдВ:

    ```python
    def convert_to_llm_tool(tool):
        tool_schema = {
            "type": "function",
            "function": {
                "name": tool.name,
                "description": tool.description,
                "type": "function",
                "parameters": {
                    "type": "object",
                    "properties": tool.inputSchema["properties"]
                }
            }
        }

        return tool_schema
    ```

    рдКрдкрд░ рджрд┐рдП рдЧрдП `convert_to_llm_tools` рдлрд╝рдВрдХреНрд╢рди рдореЗрдВ рд╣рдо MCP рдЯреВрд▓ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рд▓реЗрддреЗ рд╣реИрдВ рдФрд░ рдЙрд╕реЗ рдЙрд╕ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдмрджрд▓рддреЗ рд╣реИрдВ рдЬрд┐рд╕реЗ LLM рд╕рдордЭ рд╕рдХрддрд╛ рд╣реИред

1. рдЕрдЧрд▓рд╛, рдЕрдкрдиреЗ рдХреНрд▓рд╛рдЗрдВрдЯ рдХреЛрдб рдХреЛ рдЗрд╕ рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ:

    ```python
    for tool in tools.tools:
        print("Tool: ", tool.name)
        print("Tool", tool.inputSchema["properties"])
        functions.append(convert_to_llm_tool(tool))
    ```

    рдпрд╣рд╛рдВ, рд╣рдо MCP рдЯреВрд▓ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП `convert_to_llm_tool` рдХреЛ рдХреЙрд▓ рдХрд░ рд░рд╣реЗ рд╣реИрдВ рддрд╛рдХрд┐ рдЗрд╕реЗ рдмрд╛рдж рдореЗрдВ LLM рдХреЛ рдлреАрдб рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗред

#### .NET

1. MCP рдЯреВрд▓ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рдЙрд╕ рдкреНрд░рд╛рд░реВрдк рдореЗрдВ рдмрджрд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ рдЬрд┐рд╕реЗ LLM рд╕рдордЭ рд╕рдХрддрд╛ рд╣реИ:

```csharp
ChatCompletionsToolDefinition ConvertFrom(string name, string description, JsonElement jsonElement)
{ 
    // convert the tool to a function definition
    FunctionDefinition functionDefinition = new FunctionDefinition(name)
    {
        Description = description,
        Parameters = BinaryData.FromObjectAsJson(new
        {
            Type = "object",
            Properties = jsonElement
        },
        new JsonSerializerOptions() { PropertyNamingPolicy = JsonNamingPolicy.CamelCase })
    };

    // create a tool definition
    ChatCompletionsToolDefinition toolDefinition = new ChatCompletionsToolDefinition(functionDefinition);
    return toolDefinition;
}
```

рдКрдкрд░ рджрд┐рдП рдЧрдП рдХреЛрдб рдореЗрдВ рд╣рдордиреЗ:

- рдПрдХ рдлрд╝рдВрдХреНрд╢рди `ConvertFrom` рдмрдирд╛рдпрд╛ рдЬреЛ рдирд╛рдо, рд╡рд┐рд╡рд░рдг рдФрд░ рдЗрдирдкреБрдЯ рд╕реНрдХреАрдорд╛ рд▓реЗрддрд╛ рд╣реИред
- рдПрдХ FunctionDefinition рдмрдирд╛рдиреЗ рдХреА рдХрд╛рд░реНрдпрдХреНрд╖рдорддрд╛ рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХреА рдЬреЛ ChatCompletionsDefinition рдХреЛ рдкрд╛рд╕ рдХреА рдЬрд╛рддреА рд╣реИред рдмрд╛рдж рд╡рд╛рд▓рд╛ рд╡рд╣ рд╣реИ рдЬрд┐рд╕реЗ LLM рд╕рдордЭ рд╕рдХрддрд╛ рд╣реИред

1. рдЖрдЗрдП рджреЗрдЦреЗрдВ рдХрд┐ рдКрдкрд░ рджрд┐рдП рдЧрдП рдлрд╝рдВрдХреНрд╢рди рдХрд╛ рд▓рд╛рдн рдЙрдард╛рдиреЗ рдХреЗ рд▓рд┐рдП рдХреБрдЫ рдореМрдЬреВрджрд╛ рдХреЛрдб рдХреЛ рдХреИрд╕реЗ рдЕрдкрдбреЗрдЯ рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХрддрд╛ рд╣реИ:

    ```csharp
    async Task<List<ChatCompletionsToolDefinition>> GetMcpTools()
    {
        Console.WriteLine("Listing tools");
        var tools = await mcpClient.ListToolsAsync();

        List<ChatCompletionsToolDefinition> toolDefinitions = new List<ChatCompletionsToolDefinition>();

        foreach (var tool in tools)
        {
            Console.WriteLine($"Connected to server with tools: {tool.Name}");
            Console.WriteLine($"Tool description: {tool.Description}");
            Console.WriteLine($"Tool parameters: {tool.JsonSchema}");

            JsonElement propertiesElement;
            tool.JsonSchema.TryGetProperty("properties", out propertiesElement);

            var def = ConvertFrom(tool.Name, tool.Description, propertiesElement);
            Console.WriteLine($"Tool definition: {def}");
            toolDefinitions.Add(def);

            Console.WriteLine($"Properties: {propertiesElement}");        
        }

        return toolDefinitions;
    }
    ```    In the preceding code, we've:

    - Update the function to convert the MCP tool response to an LLm tool. Let's highlight the code we added:

        ```csharp
        JsonElement propertiesElement;
        tool.JsonSchema.TryGetProperty("properties", out propertiesElement);

        var def = ConvertFrom(tool.Name, tool.Description, propertiesElement);
        Console.WriteLine($"Tool definition: {def}");
        toolDefinitions.Add(def);
        ```

        The input schema is part of the tool response but on the "properties" attribute, so we need to extract. Furthermore, we now call `ConvertFrom` with the tool details. Now we've done the heavy lifting, let's see how it call comes together as we handle a user prompt next.

#### Java

```java
// Create a Bot interface for natural language interaction
public interface Bot {
    String chat(String prompt);
}

// Configure the AI service with LLM and MCP tools
Bot bot = AiServices.builder(Bot.class)
        .chatLanguageModel(model)
        .toolProvider(toolProvider)
        .build();
```

рдК
LLM рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдореЗрдВ `choices` рдХрд╛ рдПрдХ array рд╣реЛрдЧрд╛ред рд╣рдореЗрдВ рдкрд░рд┐рдгрд╛рдо рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░рдирд╛ рд╣реЛрдЧрд╛ рддрд╛рдХрд┐ рдпрд╣ рджреЗрдЦрд╛ рдЬрд╛ рд╕рдХреЗ рдХрд┐ рдХреЛрдИ `tool_calls` рдореМрдЬреВрдж рд╣реИрдВ рдпрд╛ рдирд╣реАрдВред рдЗрд╕рд╕реЗ рд╣рдореЗрдВ рдкрддрд╛ рдЪрд▓рддрд╛ рд╣реИ рдХрд┐ LLM рдПрдХ рд╡рд┐рд╢реЗрд╖ рдЯреВрд▓ рдХреЛ рддрд░реНрдХреЛрдВ рдХреЗ рд╕рд╛рде рдХреЙрд▓ рдХрд░рдиреЗ рдХрд╛ рдЕрдиреБрд░реЛрдз рдХрд░ рд░рд╣рд╛ рд╣реИред рдЕрдкрдиреЗ `main.rs` рдлрд╛рдЗрд▓ рдХреЗ рдЕрдВрдд рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ рддрд╛рдХрд┐ LLM рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рд╕рдВрднрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП рдПрдХ рдлрд╝рдВрдХреНрд╢рди рдкрд░рд┐рднрд╛рд╖рд┐рдд рдХрд┐рдпрд╛ рдЬрд╛ рд╕рдХреЗ:

```rust
async fn process_llm_response(
    llm_response: &Value,
    mcp_client: &RunningService<RoleClient, ()>,
    openai_client: &Client<OpenAIConfig>,
    mcp_tools: &ListToolsResult,
    messages: &mut Vec<Value>,
) -> Result<(), Box<dyn Error>> {
    let Some(message) = llm_response
        .get("choices")
        .and_then(|c| c.as_array())
        .and_then(|choices| choices.first())
        .and_then(|choice| choice.get("message"))
    else {
        return Ok(());
    };

    // Print content if available
    if let Some(content) = message.get("content").and_then(|c| c.as_str()) {
        println!("ЁЯдЦ {}", content);
    }

    // Handle tool calls
    if let Some(tool_calls) = message.get("tool_calls").and_then(|tc| tc.as_array()) {
        messages.push(message.clone()); // Add assistant message

        // Execute each tool call
        for tool_call in tool_calls {
            let (tool_id, name, args) = extract_tool_call_info(tool_call)?;
            println!("тЪб Calling tool: {}", name);

            let result = mcp_client
                .call_tool(CallToolRequestParam {
                    name: name.into(),
                    arguments: serde_json::from_str::<Value>(&args)?.as_object().cloned(),
                })
                .await?;

            // Add tool result to messages
            messages.push(json!({
                "role": "tool",
                "tool_call_id": tool_id,
                "content": serde_json::to_string_pretty(&result)?
            }));
        }

        // Continue conversation with tool results
        let response = call_llm(openai_client, messages, mcp_tools).await?;
        Box::pin(process_llm_response(
            &response,
            mcp_client,
            openai_client,
            mcp_tools,
            messages,
        ))
        .await?;
    }
    Ok(())
}
```

рдпрджрд┐ `tool_calls` рдореМрдЬреВрдж рд╣реИрдВ, рддреЛ рдпрд╣ рдЯреВрд▓ рдХреА рдЬрд╛рдирдХрд╛рд░реА рдирд┐рдХрд╛рд▓рддрд╛ рд╣реИ, MCP рд╕рд░реНрд╡рд░ рдХреЛ рдЯреВрд▓ рдЕрдиреБрд░реЛрдз рдХреЗ рд╕рд╛рде рдХреЙрд▓ рдХрд░рддрд╛ рд╣реИ, рдФрд░ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЛ рдмрд╛рддрдЪреАрдд рд╕рдВрджреЗрд╢реЛрдВ рдореЗрдВ рдЬреЛрдбрд╝рддрд╛ рд╣реИред рдЗрд╕рдХреЗ рдмрд╛рдж рдпрд╣ LLM рдХреЗ рд╕рд╛рде рдмрд╛рддрдЪреАрдд рдЬрд╛рд░реА рд░рдЦрддрд╛ рд╣реИ рдФрд░ рд╕рдВрджреЗрд╢реЛрдВ рдХреЛ рд╕рд╣рд╛рдпрдХ рдХреА рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдФрд░ рдЯреВрд▓ рдХреЙрд▓ рдкрд░рд┐рдгрд╛рдореЛрдВ рдХреЗ рд╕рд╛рде рдЕрдкрдбреЗрдЯ рдХрд░рддрд╛ рд╣реИред

MCP рдХреЙрд▓ рдХреЗ рд▓рд┐рдП LLM рджреНрд╡рд╛рд░рд╛ рд▓реМрдЯрд╛рдП рдЧрдП рдЯреВрд▓ рдХреЙрд▓ рдЬрд╛рдирдХрд╛рд░реА рдХреЛ рдирд┐рдХрд╛рд▓рдиреЗ рдХреЗ рд▓рд┐рдП, рд╣рдо рдПрдХ рдФрд░ рд╣реЗрд▓реНрдкрд░ рдлрд╝рдВрдХреНрд╢рди рдЬреЛрдбрд╝реЗрдВрдЧреЗ рдЬреЛ рдХреЙрд▓ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдЖрд╡рд╢реНрдпрдХ рд╕рднреА рдЪреАрдЬреЗрдВ рдирд┐рдХрд╛рд▓рддрд╛ рд╣реИред рдЕрдкрдиреЗ `main.rs` рдлрд╛рдЗрд▓ рдХреЗ рдЕрдВрдд рдореЗрдВ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдЬреЛрдбрд╝реЗрдВ:

```rust
fn extract_tool_call_info(tool_call: &Value) -> Result<(String, String, String), Box<dyn Error>> {
    let tool_id = tool_call
        .get("id")
        .and_then(|id| id.as_str())
        .unwrap_or("")
        .to_string();
    let function = tool_call.get("function").ok_or("Missing function")?;
    let name = function
        .get("name")
        .and_then(|n| n.as_str())
        .unwrap_or("")
        .to_string();
    let args = function
        .get("arguments")
        .and_then(|a| a.as_str())
        .unwrap_or("{}")
        .to_string();
    Ok((tool_id, name, args))
}
```

рд╕рднреА рдЯреБрдХрдбрд╝реЛрдВ рдХреЛ рдЬреЛрдбрд╝рдиреЗ рдХреЗ рдмрд╛рдж, рдЕрдм рд╣рдо рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░реЙрдореНрдкреНрдЯ рдХреЛ рд╕рдВрднрд╛рд▓ рд╕рдХрддреЗ рд╣реИрдВ рдФрд░ LLM рдХреЛ рдХреЙрд▓ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВред рдЕрдкрдиреЗ `main` рдлрд╝рдВрдХреНрд╢рди рдХреЛ рдирд┐рдореНрдирд▓рд┐рдЦрд┐рдд рдХреЛрдб рдХреЗ рд╕рд╛рде рдЕрдкрдбреЗрдЯ рдХрд░реЗрдВ:

```rust
// LLM conversation with tool calls
let response = call_llm(&openai_client, &messages, &tools).await?;
process_llm_response(
    &response,
    &mcp_client,
    &openai_client,
    &tools,
    &mut messages,
)
.await?;
```

рдпрд╣ рдкреНрд░рд╛рд░рдВрднрд┐рдХ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдкреНрд░реЙрдореНрдкреНрдЯ рдХреЗ рд╕рд╛рде LLM рдХреЛ рдХреНрд╡реЗрд░реА рдХрд░реЗрдЧрд╛, рдЬрд┐рд╕рдореЗрдВ рджреЛ рд╕рдВрдЦреНрдпрд╛рдУрдВ рдХрд╛ рдпреЛрдЧ рдкреВрдЫрдирд╛ рд╢рд╛рдорд┐рд▓ рд╣реИ, рдФрд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рдкреНрд░реЛрд╕реЗрд╕ рдХрд░реЗрдЧрд╛ рддрд╛рдХрд┐ рдЯреВрд▓ рдХреЙрд▓ рдХреЛ рдбрд╛рдпрдирд╛рдорд┐рдХ рд░реВрдк рд╕реЗ рд╕рдВрднрд╛рд▓рд╛ рдЬрд╛ рд╕рдХреЗред

рдмрд╣реБрдд рдмрдврд╝рд┐рдпрд╛, рдЖрдкрдиреЗ рдЗрд╕реЗ рдХрд░ рд▓рд┐рдпрд╛!

## рдЕрд╕рд╛рдЗрдирдореЗрдВрдЯ

рдЕрднреНрдпрд╛рд╕ рд╕реЗ рдХреЛрдб рд▓реЗрдВ рдФрд░ рд╕рд░реНрд╡рд░ рдореЗрдВ рдХреБрдЫ рдФрд░ рдЯреВрд▓ рдЬреЛрдбрд╝реЗрдВред рдлрд┐рд░ рдПрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдПрдВ рдЬрд┐рд╕рдореЗрдВ LLM рд╣реЛ, рдЬреИрд╕реЗ рдХрд┐ рдЕрднреНрдпрд╛рд╕ рдореЗрдВ, рдФрд░ рдЗрд╕реЗ рд╡рд┐рднрд┐рдиреНрди рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕ рдХреЗ рд╕рд╛рде рдЯреЗрд╕реНрдЯ рдХрд░реЗрдВ рддрд╛рдХрд┐ рдпрд╣ рд╕реБрдирд┐рд╢реНрдЪрд┐рдд рд╣реЛ рд╕рдХреЗ рдХрд┐ рдЖрдкрдХреЗ рд╕рд░реНрд╡рд░ рдЯреВрд▓реНрд╕ рдХреЛ рдбрд╛рдпрдирд╛рдорд┐рдХ рд░реВрдк рд╕реЗ рдХреЙрд▓ рдХрд┐рдпрд╛ рдЬрд╛ рд░рд╣рд╛ рд╣реИред рдЗрд╕ рдкреНрд░рдХрд╛рд░ рдХрд╛ рдХреНрд▓рд╛рдЗрдВрдЯ рдмрдирд╛рдирд╛ рдЕрдВрддрд┐рдо рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛ рдХреЛ рдПрдХ рд╢рд╛рдирджрд╛рд░ рдЕрдиреБрднрд╡ рдкреНрд░рджрд╛рди рдХрд░рддрд╛ рд╣реИ рдХреНрдпреЛрдВрдХрд┐ рд╡реЗ рдкреНрд░реЙрдореНрдкреНрдЯреНрд╕ рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░ рд╕рдХрддреЗ рд╣реИрдВ, рдмрдЬрд╛рдп рд╕рдЯреАрдХ рдХреНрд▓рд╛рдЗрдВрдЯ рдХрдорд╛рдВрдбреНрд╕ рдХреЗ, рдФрд░ MCP рд╕рд░реНрд╡рд░ рдХреЗ рдХреЙрд▓ рд╣реЛрдиреЗ рд╕реЗ рдЕрдирдЬрд╛рди рд░рд╣ рд╕рдХрддреЗ рд╣реИрдВред

## рд╕рдорд╛рдзрд╛рди

[Solution](/03-GettingStarted/03-llm-client/solution/README.md)

## рдореБрдЦреНрдп рдмрд╛рддреЗрдВ

- рдЕрдкрдиреЗ рдХреНрд▓рд╛рдЗрдВрдЯ рдореЗрдВ LLM рдЬреЛрдбрд╝рдиреЗ рд╕реЗ рдЙрдкрдпреЛрдЧрдХрд░реНрддрд╛рдУрдВ рдХреЛ MCP рд╕рд░реНрд╡рд░реНрд╕ рдХреЗ рд╕рд╛рде рдЗрдВрдЯрд░реИрдХреНрдЯ рдХрд░рдиреЗ рдХрд╛ рдмреЗрд╣рддрд░ рддрд░реАрдХрд╛ рдорд┐рд▓рддрд╛ рд╣реИред
- рдЖрдкрдХреЛ MCP рд╕рд░реНрд╡рд░ рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЛ рдХреБрдЫ рдРрд╕рд╛ рдмрджрд▓рдирд╛ рд╣реЛрдЧрд╛ рдЬрд┐рд╕реЗ LLM рд╕рдордЭ рд╕рдХреЗред

## рдирдореВрдиреЗ

- [Java Calculator](../samples/java/calculator/README.md)
- [.Net Calculator](../../../../03-GettingStarted/samples/csharp)
- [JavaScript Calculator](../samples/javascript/README.md)
- [TypeScript Calculator](../samples/typescript/README.md)
- [Python Calculator](../../../../03-GettingStarted/samples/python)
- [Rust Calculator](../../../../03-GettingStarted/samples/rust)

## рдЕрддрд┐рд░рд┐рдХреНрдд рд╕рдВрд╕рд╛рдзрди

## рдЖрдЧреЗ рдХреНрдпрд╛

- рдЕрдЧрд▓рд╛: [Visual Studio Code рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рд╕рд░реНрд╡рд░ рдХреЛ рдХрдВрдЬреНрдпреВрдо рдХрд░рдирд╛](../04-vscode/README.md)

---

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рдпрд╣ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рдХрд╛ рдЙрдкрдпреЛрдЧ рдХрд░рдХреЗ рдЕрдиреБрд╡рд╛рджрд┐рдд рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред рдЬрдмрдХрд┐ рд╣рдо рд╕рдЯреАрдХрддрд╛ рдХреЗ рд▓рд┐рдП рдкреНрд░рдпрд╛рд╕ рдХрд░рддреЗ рд╣реИрдВ, рдХреГрдкрдпрд╛ рдзреНрдпрд╛рди рджреЗрдВ рдХрд┐ рд╕реНрд╡рдЪрд╛рд▓рд┐рдд рдЕрдиреБрд╡рд╛рдж рдореЗрдВ рддреНрд░реБрдЯрд┐рдпрд╛рдВ рдпрд╛ рдЕрд╢реБрджреНрдзрд┐рдпрд╛рдВ рд╣реЛ рд╕рдХрддреА рд╣реИрдВред рдореВрд▓ рднрд╛рд╖рд╛ рдореЗрдВ рдЙрдкрд▓рдмреНрдз рдореВрд▓ рджрд╕реНрддрд╛рд╡реЗрдЬрд╝ рдХреЛ рдЖрдзрд┐рдХрд╛рд░рд┐рдХ рд╕реНрд░реЛрдд рдорд╛рдирд╛ рдЬрд╛рдирд╛ рдЪрд╛рд╣рд┐рдПред рдорд╣рддреНрд╡рдкреВрд░реНрдг рдЬрд╛рдирдХрд╛рд░реА рдХреЗ рд▓рд┐рдП, рдкреЗрд╢реЗрд╡рд░ рдорд╛рдирд╡ рдЕрдиреБрд╡рд╛рдж рдХреА рд╕рд┐рдлрд╛рд░рд┐рд╢ рдХреА рдЬрд╛рддреА рд╣реИред рдЗрд╕ рдЕрдиреБрд╡рд╛рдж рдХреЗ рдЙрдкрдпреЛрдЧ рд╕реЗ рдЙрддреНрдкрдиреНрди рдХрд┐рд╕реА рднреА рдЧрд▓рддрдлрд╣рдореА рдпрд╛ рдЧрд▓рдд рд╡реНрдпрд╛рдЦреНрдпрд╛ рдХреЗ рд▓рд┐рдП рд╣рдо рдЙрддреНрддрд░рджрд╛рдпреА рдирд╣реАрдВ рд╣реИрдВред